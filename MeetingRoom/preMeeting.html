<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="../js/jquery-1.11.0.js" ></script>
		<script type="text/javascript" src="../js/common.js" ></script>
		<!--选择参会人员区域的相关样式-->
		<style type="text/css">
            #divfrom{
                float:left;
                width:150px;
            }
            #divto{
                float:left;
                width:150px;
            }
            #divoperator{
                float:left;
                width:50px;
                padding:60px 5px;
            }
            #divoperator input[type="button"]{
                margin:10px 0;
            }
            #selDepartments{
                display:block;
                width:100%;
            }
            #selEmployees{
                display:block;
                width:100%;
                height:200px;
            }
            #selSelectedEmployees{
                display:block;
                width:100%;
                height:225px;
            }
        </style>
        <script type="application/javascript">
            /*选择参会人员的动态变化JS*/
            //定义初始化部门测试数据
            var deptJsonArray = [
				{
					"id":1,
					"name":"技术部1",
					"remark":"技术部描述"
				},
				{
					"id":2,
					"name":"财务部",
					"remark":"财务部描述"
				},
				{
					"id":3,
					"name":"测试部",
					"remark":"测试部描述"
				},
				{
					"id":4,
					"name":"销售部",
					"remark":"销售部描述"
				},
				{
					"id":5,
					"name":"后勤部",
					"remark":"后勤部描述"
				},
				{
					"id":6,
					"name":"技术部2",
					"remark":"技术部2描述"
				},
				{
					"id":7,
					"name":"技术部3",
					"remark":"技术部3描述"
				}
			]
            //定义初始化员工测试数据
            var employeeJsonArray = [
				{
					"id":1,
					"name":"张三1",
					"cardid":"230989898976765451",
					"sex":"男",
					"email":"zhangsan1@qq.com",
					"education":"本科",
					"speciality":"计算机",
					"phone":"13598989891",
					"password":"123456",
					"auditstatus":"1",
					"status":"1",
					"tel":"010-898989",
					"party":"团员",
					"qqnum":"1098987654",
					"address":"北京市海淀区",
					"postcode":"100100",
					"birthday":"2001-10-07",
					"race":"汉",
					"remark":"",
					"depid":"2",
					"levelid":3,
					"salary":"8500",
					"joindate":"2021-08-09"
				},
				{
					"id":2,
					"name":"张三2",
					"cardid":"230989898976765454",
					"sex":"男",
					"email":"zhangsan2@qq.com",
					"education":"本科",
					"speciality":"计算机",
					"phone":"13598989892",
					"password":"123456",
					"auditstatus":"1",
					"status":"1",
					"tel":"010-898989",
					"party":"团员",
					"qqnum":"1098987654",
					"address":"北京市海淀区",
					"postcode":"100100",
					"birthday":"2001-10-07",
					"race":"汉",
					"remark":"",
					"depid":"1",
					"levelid":3,
					"salary":"9500",
					"joindate":"2021-08-09"
				},
				{
					"id":3,
					"name":"张三3",
					"cardid":"230989898976765453",
					"sex":"男",
					"email":"zhangsan3@qq.com",
					"education":"本科",
					"speciality":"计算机",
					"phone":"13598989893",
					"password":"123456",
					"auditstatus":"1",
					"status":"2",
					"tel":"010-898989",
					"party":"团员",
					"qqnum":"1098987654",
					"address":"北京市海淀区",
					"postcode":"100100",
					"birthday":"2001-10-07",
					"race":"汉",
					"remark":"",
					"depid":"1",
					"levelid":1,
					"salary":"4500",
					"joindate":"2021-08-09"
				},
				{
					"id":4,
					"name":"张三4",
					"cardid":"230989898976765454",
					"sex":"男",
					"email":"zhangsan4@qq.com",
					"education":"本科",
					"speciality":"计算机",
					"phone":"13598989894",
					"password":"123456",
					"auditstatus":"1",
					"status":"2",
					"tel":"010-898989",
					"party":"团员",
					"qqnum":"1098987654",
					"address":"北京市海淀区",
					"postcode":"100100",
					"birthday":"2001-10-07",
					"race":"汉",
					"remark":"",
					"depid":"1",
					"levelid":4,
					"salary":"15000",
					"joindate":"2021-08-09"
				}
			]
            
            
            function body_load(){//当页面加载时触发执行
                //首先生成部门下拉选项
                for(var i=0;i<deptJsonArray.length;i++){
                	var dept = deptJsonArray[i];
                	if(dept!=undefined){
                		$("#selDepartments").append("<option value='"+dept.id+"'>"+dept.name+"</option>");
                	}
                }
                fillEmployees();//根据选中的部门生成员工列表下拉框
            }
            
            //根据选中的部门生成员工列表下拉框
            function fillEmployees(){
                $("#selEmployees").html("");//先清空该下拉框
                //获取选中的部门下拉框
                var deptid = $("#selDepartments").val();
                for(i=0;i<employeeJsonArray.length;i++){
                    var employee = employeeJsonArray[i];
                	if(employee!=undefined && employee.depid==deptid){
                		$("#selEmployees").append("<option value='"+employee.id+"'>"+employee.name+"</option>");
                	}
                }
            }
            
            //点击选择该员工进行参会的按钮触发的事件
            function selectEmployees(){
            	//获取得到所有的选中的员工列表
            	var selectedEmps = $("#selEmployees>option:selected");
                for(var i=0;i<selectedEmps.length;i++){//将选中的员工追加到右侧的员工列表区域
                	var selectedEmp = selectedEmps[i];
                	//首先判断该员工原来是否有出现在右侧区域中
                	//初始化定义并未出现过
                	var flag = true;
                	var selSelectedEmployees = $("#selSelectedEmployees option");
                	for(var j=0;j<selSelectedEmployees.length;j++){
                		var selSelectedEmployee = selSelectedEmployees[j];
                		if($(selSelectedEmployee).val()==$(selectedEmp).val()){
                			flag = false;
                			break;
                		}
                	}
                	if(flag){
                		$("#selSelectedEmployees").append("<option value='"+$(selectedEmp).val()+"'>"+$(selectedEmp).text()+"</option>");
                	}
                }
            }
            
            //点击取消选择该员工进行参会的按钮触发的事件
            function deSelectEmployees(){
                //获取得到所有的选中的想要取消参加会议的员工列表
                var selSelectedEmployees = $("#selSelectedEmployees>option:selected");
                for(var i=0;i<selSelectedEmployees.length;i++){
                	$(selSelectedEmployees[i]).remove();
                }
            }
            
                 
        </script>
	</head>
	<body onload="body_load()">
		<!--预定的form表单-->
		<form>
			<div style="margin:50px;">
				会议名称：<input type="text" id="title" />
				<br/><br/>
				预计参加人数：<input type="text" id="num" />
				<br/><br/>
				预计开始时间：<input type="text" id="starttime" />
				<br/><br/>
				预计结束时间：<input type="text" id="endtime" />
				<br/><br/>
				会议室：<select id="mid">
					<option>第一会议室</option>
					<option>第二会议室</option>
					<option>第三会议室</option>
				</select>
				<br/><br/>
				会议说明：<input type="text" id="remark" />
				<br/><br/>
				<div style="height: 200px;">
					<div style="float: left;">选择参会人员：</div>
					<div id="divfrom">
	                    <select id="selDepartments" onchange="fillEmployees()">
	                    </select>
	                    <select id="selEmployees" multiple="true">
	                     </select>
	                </div>
	                <div id="divoperator">
	                    <input type="button" class="clickbutton" value="&gt;" onclick="selectEmployees()"/>
	                    <input type="button" class="clickbutton" value="&lt;" onclick="deSelectEmployees()"/>
	                </div>
	                <div id="divto">
	                    <select id="selSelectedEmployees" multiple="true">
	                    </select>
	                </div>
        		</div>
				<br /><br /><br />
				<input type="button" value="预定" />
				&nbsp;&nbsp;&nbsp;&nbsp;
				<input type="reset" value="取消"  />
			</div>
		</form>
	</body>
</html>
